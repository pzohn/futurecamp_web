<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="keywords" content="">
  <meta name="description" content="">
  <meta name="author" content="">
  <title>历史营</title>
    <script type="text/javascript" src="jquery-3.3.1.js"></script>
    <script type="text/javascript" src="bootstrap/js/popper.min.js"></script>
    <script type="text/javascript" src="bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="./layui/layui.all.js"></script>

    <link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="layui/css/layui.css"/>
  <style type="text/css">
    html{width:100%px;height:100%;margin:0px;padding:0px;}
    body{
      background-color:#fff;
    }
    li{
      margin: 0 10px;
    }
    .jumbotron{
      margin-bottom: 0px !important;
      padding-top: 10px !important;
      padding-bottom: 10px !important;
      background: #669900;
      border-radius: 0px;
    }
    .top{
      padding-left: 30px;
    }
    .card{
      width: 80%;
      margin-left: 10%;
    }

    .middle {
       float: none;
       display: inline-block;
       vertical-align: middle;
     }
    }
  </style>

</head>

<body>
 <div class="container">
  <div class="header">
    <div class="logo" style="text-align: center;">
     <img src="images/index/logo1.png" class="rounded" alt="Cinque Terre" style="width: 20%;height: 20%;padding-top: 5%"> 
    </div>
    <nav class="justify-content-center navbar navbar-expand-sm bg-light navbar-light" style="margin: 0 auto;background-color: white !important;padding-top: 20px;">
      <ul class="navbar-nav" >
        <li class="nav-item">
          <a class="nav-link" href="index.html">首页</a>
        </li>
         <li class="nav-item">
          <a class="nav-link" href="nature.html">自然营</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="survive.html">生存营</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="think.html">思辨营</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="science.html">科学营</a>
        </li>
        <li class="nav-item active">
          <a class="nav-link" href="humanism.html">人文营</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="camps.html">营会团</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="about.html">关于我们</a>
        </li>
      </ul>
  </nav>
  </div>
  <div class="body">
    <div>
      <div class="row" style="padding-top: 55px;">
        <div class="dropdown" style="padding-left: 150px;">
          <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" style="width: 120px;">
            中国
          </button>
          <div class="dropdown-menu" >
            <a class="dropdown-item" href="#">北美</a>
            <a class="dropdown-item" href="#">欧洲</a>
            <a class="dropdown-item" href="#">东南亚</a>
          </div>
        </div>
        <div class="form-group">
          <input type="text" class="form-control" style="width: 600px;">
        </div>
        <div>
          <a href="#" class="btn btn-primary" role="button" style="width: 90px;">搜索</a>
        </div>
      </div>
    </div>

    <div id="Good_Div"></div>

  </div>

  <div style="text-align: center;padding-top: 2%">
    <div id="test1"></div>
  </div>


  <div class="tail" style="background:url(images/index/u264.png);height: 300px;">
    <div class="row" style="padding-left: 23%;padding-top: 10px;">
      <div>
        <hr style="width: 200px;border: 1px solid white;">
      </div>
      <div style="text-align: center;font-size: 16px;color: white;margin-top: 5px;margin-left: 10px;margin-right: 20px;">
        <strong>联系我们/CONTACT US</strong>
      </div>
      <div>
        <hr style="width: 200px;border: 1px solid white;">
      </div>
    </div>
    <div>
      <p style="text-align: center;font-size: 10px;color: white;">在您的建议与帮助下，我们将会变得越来越好！</p>
    </div>
    <div class="row">
      <div style="padding-left: 180px;">
        <img src="images/about/u669.jpg" class="img-thumbnail" alt="Cinque Terre" style="width: 70%;">
      </div>
<!--       <div style="padding-left: 180px;padding-top: 20px;">
        <img src="images/index/u26.png" class="" alt="Cinque Terre" style="width: 138px;height: 134px;">
      </div> -->
      <div style="padding-left: 30%;padding-top: 30px;color: white;text-align: center;font-size: 16px;">
        <p>联系我们</p>
        <p>Tel：400-111-0611</p>
        <p>微信公众号：少年行 未来营</p>
      </div>
      <div style="text-align: center;color: white;padding-left: 35%;padding-top: 10px;">
        <p style="font-size: 12px;">© 2018 独角兽（深圳）营销管理有限公司 | 深ICP备18014687号</p>
      </div>
    </div>
  </div>

  <script type="text/javascript">
    var myPages =new Array();
    function setDiv(item){
      var div = '<div class="p-2 flex-fill">'
          + '<img src='
          + getPath(item)
          + ' style="padding-bottom: 20px;">'
          + '<div style="width: 338px;">'
          +'<p>'
           + item.name
          + '</p>'
          + '</div>'
          + '<div style="width: 338px; padding-left: 70%">'
          + '<a href="detail.html?id='
          + item.id
          + '"'
          + ' class="btn btn-primary" role="button" style="width: 90px;">查看详情</a>'
          + '</div>'
          +'</div>'
      return div
    } 
    function setUnDiv(item){
      var div = '<div class="p-2 flex-fill">'
          + '<img style="padding-bottom: 20px;">'
          + '<div style="width: 338px;">'
          +'<p>'
          + '</p>'
          + '</div>'
          + '<div style="width: 338px; padding-left: 70%">'
          + '</div>'
          +'</div>'
      return div
    } 
    function getPath(item){
      var url = "http://hattonstar.com/"
          + item.file
          +'/'
          + item.title_pic
      return url;
    } 

//先分页，再分页缓存显示
  $(document).ready(function(){
  $.ajax({
    type:'POST',
    url:'https://www.gfcamps.cn/getCampactivitiesByLittleType',
    dataType:'json',
      data:{
            type_id : 15
          },
    success:function(data){
      var length = data.length;
      var pagesize = Math.ceil(length / 9);
      var leftPageContentSize = length % 9;
      for (var i = 0; i < pagesize - 1; i++){
        var myIndexes = new Array();
        for (var j = 0; j < 9; j++) {
          var index = j + i*9;
          myIndexes[j] = index;
        }
        myPages[i] = myIndexes;
      }
      var myIndexes = new Array();
      for (var j = 0; j < leftPageContentSize; j++) {
        var index = j + (pagesize -1)*9;
        myIndexes[j] = index;
      }
      myPages[pagesize -1] = myIndexes;


      layui.use('laypage', function(){
        var laypage = layui.laypage;
        
        laypage.render({
          elem: 'test1'
          ,count: myPages.length //数据总数，从服务端得到
          ,limit:1
          ,jump: function(obj, first){
            //obj包含了当前分页的所有参数，比如：
            console.log(obj.curr); //得到当前页，以便向服务端请求对应页的数据。
            console.log(obj.limit); //得到每页显示的条数
            
            if (obj.curr != myPages.length) {
              var myIndex = myPages[obj.curr -1];
              var pageHtml = "";
              for (var j = 0; j < 9; j++) {
                var index = myIndex[j];
                if (index%3==0) {
                  pageHtml += '<div class="d-flex" style="height: 330px;">';
                }
                pageHtml += setDiv(data[index]);
                if (index%3==2) {
                  pageHtml += '</div>';
                }
              }
              $("#Good_Div").html(pageHtml);
            }else{
                var myIndex = myPages[obj.curr -1];
                var pageHtml = "";
                var remainder = myIndex.length % 3;
                for (var j = 0; j < myIndex.length; j++) {
                var index = j + (pagesize -1)*9;
                if (index%3==0) {
                  pageHtml += '<div class="d-flex" style="height: 330px;">';
                }
                pageHtml += setDiv(data[index]);
                if (index%3==2) {
                  pageHtml += '</div>';
                }
              }
              if (remainder) {
                var num = 3 - remainder;
                for (var i = 0; i < num; i++) {
                  pageHtml += setUnDiv();
                }
                 pageHtml += '</div>';
              }
               $("#Good_Div").html(pageHtml);
            }
          }
        });
    });
    },
    error:function(hex){
      alert("错误返回");
    }
  })      
});
 
  </script>
</body>
</html>
