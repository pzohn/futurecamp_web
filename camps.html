<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="keywords" content="">
  <meta name="description" content="">
  <meta name="author" content="">
  <title>群营会</title>
    <script type="text/javascript" src="jquery-3.3.1.js"></script>
    <script type="text/javascript" src="bootstrap/js/popper.min.js"></script>
    <script type="text/javascript" src="bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="./layui/layui.all.js"></script>

    <link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="layui/css/layui.css"/>
   
  <style type="text/css">
    html{width:100%px;height:100%;margin:0px;padding:0px;}
    body{
      background-color:#fff;
    }
    li{
      margin: 0 10px;
    }
    .jumbotron{
      margin-bottom: 0px !important;
      padding-top: 10px !important;
      padding-bottom: 10px !important;
      background: #669900;
      border-radius: 0px;
    }
    .top{
      padding-left: 30px;
    }
    .card{
      width: 80%;
      margin-left: 10%;
    }

    .line{
      background: url('https://www.gfcamps.cn/images/camps/common/line1.png');height: 5px;margin-bottom: 5%;
    }

    .autoimg
    {
      width:auto;height:auto;max-width:80%;max-height:80%;
    }
    .middle {
       float: none;
       display: inline-block;
       vertical-align: middle;
     }
    }
  </style>

</head>

<body>

 <div class="container">
  <div class="header">
    <div class="logo" style="text-align: center;">
     <img src="images/index/logo1.png" class="rounded" alt="Cinque Terre" style="width: 20%;height: 20%;padding-top: 5%"> 
    </div>
    <nav class="justify-content-center navbar navbar-expand-sm bg-light navbar-light" style="margin: 0 auto;background-color: white !important;padding-top: 20px;">
      <ul class="navbar-nav" >
        <li class="nav-item">
          <a class="nav-link" href="index.html">首页</a>
        </li>
         <li class="nav-item">
          <a class="nav-link" href="nature.html">自然营</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="survive.html">生存营</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="think.html">思辨营</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="science.html">科学营</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="humanism.html">人文营</a>
        </li>
        <li class="nav-item active">
          <a class="nav-link" href="camps.html">营会团</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="about.html">关于我们</a>
        </li>
      </ul>
  </nav>
  </div>
  <div class="body">   
    <div>
      <div style="text-align: center;">
        <img src="images/u40.png" class="rounded" alt="Cinque Terre" style="width: 100%;height: 100%;padding-top: 2%"> 
      </div>
      <div class="row" style="padding-top: 55px;">
        <div class="dropdown" style="padding-left: 150px;">
          <button type="button" class="btn btn-primary" data-toggle="dropdown" style="width: 120px;">
            关键字
          </button>
        </div>
        <div class="form-group">
          <input type="text" class="form-control" style="width: 600px;">
        </div>
        <div>
          <a href="#" class="btn btn-primary" role="button" style="width: 90px;">搜索</a>
        </div>
      </div>
    </div>

    <div class="center-body" style="padding-left:10%;padding-right:10%;padding-top: 5%">
      <div>
       <div id="Camps_Div"></div>
      </div>
    </div>
    
  <div style="text-align: center;padding-top: 2%">
    <div id="test1"></div>
  </div>



  </div>

  <div class="tail" style="background:url(images/index/u264.png);height: 300px;">
    <div class="row" style="padding-left: 23%;padding-top: 10px;">
      <div>
        <hr style="width: 200px;border: 1px solid white;">
      </div>
      <div style="text-align: center;font-size: 16px;color: white;margin-top: 5px;margin-left: 10px;margin-right: 20px;">
        <strong>联系我们/CONTACT US</strong>
      </div>
      <div>
        <hr style="width: 200px;border: 1px solid white;">
      </div>
    </div>
    <div>
      <p style="text-align: center;font-size: 10px;color: white;">在您的建议与帮助下，我们将会变得越来越好！</p>
    </div>
    <div class="row">
      <div style="padding-left: 180px;">
        <img src="images/about/u669.jpg" class="img-thumbnail" alt="Cinque Terre" style="width: 70%;">
      </div>
      <div style="padding-left: 30%;padding-top: 30px;color: white;text-align: center;font-size: 16px;">
        <p>联系我们</p>
        <p>Tel：400-111-0611</p>
        <p>微信公众号：少年行 未来营</p>
      </div>
      <div style="text-align: center;color: white;padding-left: 35%;padding-top: 10px;">
        <p style="font-size: 12px;">© 2018 独角兽（深圳）营销管理有限公司 | 深ICP备18014687号</p>
      </div>
    </div>
  </div>

    <script type="text/javascript">
    var myPages =new Array();
    function setCamp(item){
      var div = '<div class="layui-row">'
          + '<a href="camp.html?id='
          + item.id
          + '"'
          + '>'
          + '<div class="layui-col-xs6" style="width: 40%">'
          + '<div><img class="autoimg" src="'
          + getPath(item.logo)
          + '" style="margin: 5%;"></div>'
          + '</div>'
          + '<div class="layui-col-xs6"  style="width: 60%">'
          + '<div>'
          + '<p style="font-size: 16px;color: #666666;">'
          + item.info
          + '</p>'
          + '</div>'
          + '<div class="layui-row" style="padding-top: 3%">'
          + '<div class="layui-col-xs6" style="width: 70%">'
          + '<p style="font-size: 18px;color: #008000;">'
          + '主营:'
          + item.main
          + '</p>'
          + '</div>'
          + '<div class="layui-col-xs6"  style="width: 30%;text-align: right;padding-bottom: 5%">'
          + '<div>'
          + '<p style="font-size: 18px;color: #666666;">'
          + '所在地：'
          + item.city
          + '</p>'
          + '</div></div></div></div></div>'
          + '<div class="line"></div>'
      return div
    }       


    function getPath(path){
      var url = "https://www.gfcamps.cn/images/camps/"
          + path
      return url;
    } 
    
//先分页，再分页缓存显示
  $(document).ready(function(){
  $.ajax({
    type:'POST',
    url:'https://www.gfcamps.cn/getCamps',
    dataType:'json',
    success:function(data){
      var length = data.length;
      var pagesize = Math.ceil(length / 9);
      var leftPageContentSize = length % 9;
      for (var i = 0; i < pagesize - 1; i++){
        var myIndexes = new Array();
        for (var j = 0; j < 9; j++) {
          var index = j + i*9;
          myIndexes[j] = index;
        }
        myPages[i] = myIndexes;
      }
      var myIndexes = new Array();
      for (var j = 0; j < leftPageContentSize; j++) {
        var index = j + (pagesize -1)*9;
        myIndexes[j] = index;
      }
      myPages[pagesize -1] = myIndexes;


      layui.use('laypage', function(){
        var laypage = layui.laypage;
        
        laypage.render({
          elem: 'test1'
          ,count: myPages.length //数据总数，从服务端得到
          ,limit:1
          ,jump: function(obj, first){
            //obj包含了当前分页的所有参数，比如：
            console.log(obj.curr); //得到当前页，以便向服务端请求对应页的数据。
            console.log(obj.limit); //得到每页显示的条数
            
            if (obj.curr != myPages.length) {
              var myIndex = myPages[obj.curr -1];
              var pageHtml = "";
              for (var j = 0; j < 9; j++) {
                var index = myIndex[j];
                pageHtml += setCamp(data[index]);
              }
              $("#Camps_Div").html(pageHtml);
            }else{
                var myIndex = myPages[obj.curr -1];
                var pageHtml = "";
                for (var j = 0; j < myIndex.length; j++) {
                var index = j + (pagesize -1)*9;
                pageHtml += setCamp(data[index]);
              }
              $("#Camps_Div").html(pageHtml);
            }
          }
        });
    });
    },
    error:function(hex){
      alert("错误返回");
    }
  })      
});

    
  </script>
</body>
</html>
